<html>
  <head>
    <title>Settings | LootL</title>
    <link rel="stylesheet" href="https://lootl.ml/css/spectre.min.css">
    <link rel="stylesheet" href="https://lootl.ml/css/spectre-exp.min.css">
    <link rel="stylesheet" href="https://lootl.ml/css/spectre-icons.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Are you blind? You can't even read the title of this page. Wow, go to an ophthalmologist.">
    <meta name="keywords" content="gamble,casino,lootbox,loot,lootl,account,user,settings,change">
    <meta property="og:image" content="https://lootl.ml/img/lootl.png">
    <meta name="theme-color" content="#00AAFF">
    <link id="favicon" rel="icon" href="https://lootl.ml/img/lootl.png">
    <script type="text/javascript" src="https://lootl.ml/js/jquery-3.5.1.js"></script>
  </head>
</html>
<body>
  <header class="navbar">
    <section class="navbar-section">
      <a href="https://lootl.ml" class="navbar-brand mr-2"><img src="https://lootl.ml/img/lootl.png" width="50px"></a>
    </section>
    <section class="navbar-section" id="navbar-user">
      <div class="popover popover-bottom">
        <a class="c-hand" style="color: #000; margin-right: 10px; text-decoration: none;" id="navbar-username">Welcome, User!</a>
        <a class="c-hand" style="margin-right: 10px;">
          <figure class="avatar avatar-lg">
            <img style="background-color: #ededed;" id="navbar-avatar" src="https://lootl.ml/img/lootl.png" alt="https://lootl.ml/lootl.png">
          </figure>
        </a>
        <div class="popover-container">
          <ul class="menu">
            <li class="menu-item">
              <div class="tile tile-centered">
                <div class="tile-icon"><img id="navbar-menu-avatar" class="avatar" src="https://lootl.ml/img/lootl.png" style="background-color: #ededed;"></div>
                <div class="tile-content" id="navbar-menu-username">User</div>
              </div>
            </li>
            <li class="divider"></li>
            <li class="menu-item c-hand"><a href="https://lootl.ml/me/inventory">My inventory</a></li>
            <li class="menu-item c-hand"><a class="active" href="https://lootl.ml/me/settings">Settings</a></li>
          </ul>
        </div>
      </div>
    </section>
  </header>
  
  <main>
    <div class="toast toast-error">
      <h6>Disclaimer</h6>
      <p>This website is in construction, please don't use this website until this disclaimer is gone.</p>
    </div>
    
    <div class="modal modal-sm" id="modal-edit-username">
      <a href="#close" class="modal-overlay" aria-label="Close"></a>
      <div class="modal-container">
        <div class="modal-header">
          <a href="#close" class="btn btn-clear float-right" aria-label="Close"></a>
          <div class="modal-title h5">Edit username</div>
        </div>
        <div class="modal-body">
          <div class="content">
            <div class="form-group">
              <label class="form-label" for="edit-username-username">New username</label>
              <input class="form-input" type="text" id="edit-username-username" placeholder="Username">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" style="background: #32b643; border-color: #32b643;" onclick="modal_edit_username_edit();">Edit</button>
          <a class="btn btn-link" style="color: #e85600;" href="#close">Cancel</a>
        </div>
      </div>
    </div>
    
    <div class="modal modal-sm" id="modal-edit-avatar">
      <a href="#close" class="modal-overlay" aria-label="Close"></a>
      <div class="modal-container">
        <div class="modal-header">
          <a href="#close" class="btn btn-clear float-right" aria-label="Close"></a>
          <div class="modal-title h5">Edit avatar</div>
        </div>
        <div class="modal-body">
          <div class="content">
            <div class="form-group">
              <label class="form-label" for="edit-avatar-avatar">New avatar</label>
              <input class="form-input" type="url" id="edit-avatar-avatar" placeholder="URL">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" style="background: #32b643; border-color: #32b643;" onclick="modal_edit_avatar_edit();">Edit</button>
          <a class="btn btn-link" style="color: #e85600;" href="#close">Cancel</a>
        </div>
      </div>
    </div>
    
    <center>
      <br>
      <div class="panel">
        <div class="panel-header text-center">
          <figure class="avatar avatar-lg"><img id="user-panel-avatar" src="https://lootl.ml/img/lootl.png" style="background-color: #ededed;"></figure>
          <div id="user-panel-username" class="panel-title h5 mt-10">User</div>
        </div>
        <nav class="panel-nav">
          <ul class="tab tab-block">
            <li class="tab-item active"><a href="#profile">Profile</a></li>
            <li class="tab-item"><a href="#manage">Manage</a></li>
          </ul>
        </nav>
        <div class="panel-body">
          <div class="tile tile-centered">
            <div class="tile-content">
              <div class="tile-title text-bold">Username</div>
              <div class="tile-subtitle" id="user-panel-profile-username">User</div>
            </div>
            <div class="tile-action">
              <a href="#modal-edit-username" class="btn btn-link btn-action btn-lg tooltip tooltip-left" data-tooltip="Edit username"><i class="icon icon-edit" style="color: #00aaff;"></i></a>
            </div>
          </div>
          <br>
          <div class="tile tile-centered">
            <div class="tile-content">
              <div class="tile-title text-bold">Avatar</div>
              <div class="tile-subtitle" id="user-panel-profile-avatar">https://lootl.ml/img/lootl.png</div>
            </div>
            <div class="tile-action">
              <a href="#modal-edit-avatar" class="btn btn-link btn-action btn-lg tooltip tooltip-left" data-tooltip="Edit avatar"><i class="icon icon-edit" style="color: #00aaff;"></i></a>
            </div>
          </div>
        </div>
        <div class="panel-footer">
          <button id="save-settings" class="btn btn-primary btn-block" style="background: #00aaff; border-color: #00aaff;" onclick="save_settings();">Save</button>
        </div>
      </div>
    </center>
  </main>
</body>
<script>
  function save_settings(){
    localStorage.setItem("username", document.getElementById("user-panel-profile-username").innerHTML);
    localStorage.setItem("avatar", document.getElementById("user-panel-profile-avatar").innerHTML);
    document.getElementById("save-settings").classList.add("loading");
    setTimeout(function() {
      document.getElementById("save-settings").classList.remove("loading");
    }, 1);
  }
  
  function modal_edit_username_edit(){
    location.href = "https://lootl.ml/me/settings#close";
    document.getElementById("user-panel-username").innerHTML = document.getElementById("edit-username-username").value;
    document.getElementById("user-panel-profile-username").innerHTML = document.getElementById("edit-username-username").value;
  }
  
  function modal_edit_avatar_edit(){
    location.href = "https://lootl.ml/me/settings#close";
    document.getElementById("user-panel-avatar").src = document.getElementById("edit-avatar-avatar").value;
    document.getElementById("user-panel-profile-avatar").innerHTML = document.getElementById("edit-avatar-avatar").value;
  }
  
  document.addEventListener("DOMContentLoaded", function(){
    if (localStorage.getItem("username") && localStorage.getItem("avatar")){
      document.getElementById("navbar-username").innerHTML = localStorage.getItem("username");
      document.getElementById("navbar-avatar").src = localStorage.getItem("avatar");
      document.getElementById("navbar-menu-username").innerHTML = localStorage.getItem("username");
      document.getElementById("navbar-menu-avatar").src = localStorage.getItem("avatar");
      document.getElementById("user-panel-username").innerHTML = localStorage.getItem("username");
      document.getElementById("user-panel-avatar").src = localStorage.getItem("avatar");
      document.getElementById("user-panel-profile-username").innerHTML = localStorage.getItem("username");
      document.getElementById("user-panel-profile-avatar").innerHTML = localStorage.getItem("avatar");
      document.getElementById("edit-avatar-avatar").value = localStorage.getItem("avatar");
      document.getElementById("favicon").href = localStorage.getItem("avatar");
    } else {
      location.href = "https://lootl.ml";
    }
  });
</script>
