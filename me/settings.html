<html>
  <head>
    <title>Settings | LootL</title>
    <link rel="stylesheet" href="https://lootl.ml/css/spectre.min.css">
    <link rel="stylesheet" href="https://lootl.ml/css/spectre-exp.min.css">
    <link rel="stylesheet" href="https://lootl.ml/css/spectre-icons.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Are you blind? You can't even read the title of this page. Wow, go to an ophthalmologist.">
    <meta name="keywords" content="gamble,casino,lootbox,loot,lootl,account,user,settings,change">
    <meta property="og:image" content="https://lootl.ml/img/lootl.png">
    <meta name="theme-color" content="#00AAFF">
    <link id="favicon" rel="icon" href="https://lootl.ml/img/lootl.png">
  </head>
</html>
<body>
  <header class="navbar">
    <section class="navbar-section">
      <a href="https://lootl.ml" class="navbar-brand mr-2"><img src="https://lootl.ml/img/lootl.png" width="50px"></a>
    </section>
    <section class="navbar-section" id="navbar-user">
      <div class="popover popover-bottom">
        <a class="c-hand" style="color: #000; margin-right: 10px; text-decoration: none;" id="navbar-username">Welcome, User!</a>
        <a class="c-hand" style="margin-right: 10px;">
          <figure class="avatar avatar-lg">
            <img style="background-color: #ededed;" id="navbar-avatar" src="https://lootl.ml/img/lootl.png" alt="https://lootl.ml/lootl.png">
          </figure>
        </a>
        <div class="popover-container">
          <ul class="menu">
            <li class="menu-item">
              <div class="tile tile-centered">
                <div class="tile-icon"><img id="navbar-menu-avatar" class="avatar" src="https://lootl.ml/img/lootl.png" style="background-color: #ededed;"></div>
                <div class="tile-content" id="navbar-menu-username">User</div>
              </div>
            </li>
            <li class="divider"></li>
            <li class="menu-item c-hand"><a href="https://lootl.ml/me/inventory">My inventory</a></li>
            <li class="menu-item c-hand"><a class="active" href="https://lootl.ml/me/settings">Settings</a></li>
          </ul>
        </div>
      </div>
    </section>
  </header>
  
  <main>
    <div class="modal modal-sm" id="modal-edit-username">
      <a href="#close" class="modal-overlay" aria-label="Close"></a>
      <div class="modal-container">
        <div class="modal-header">
          <a href="#close" class="btn btn-clear float-right" aria-label="Close"></a>
          <div class="modal-title h5">Edit username</div>
        </div>
        <div class="modal-body">
          <div class="content">
            <div class="form-group">
              <label class="form-label" for="edit-username-username">New username</label>
              <input class="form-input" type="text" id="edit-username-username" placeholder="Username">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" style="background: #32b643; border-color: #32b643;" onclick="modal_edit_username_edit();">Edit</button>
          <a class="btn btn-link" style="color: #e85600;" href="#close">Cancel</a>
        </div>
      </div>
    </div>
    
    <div class="modal modal-sm" id="modal-edit-avatar">
      <a href="#close" class="modal-overlay" aria-label="Close"></a>
      <div class="modal-container">
        <div class="modal-header">
          <a href="#close" class="btn btn-clear float-right" aria-label="Close"></a>
          <div class="modal-title h5">Edit avatar</div>
        </div>
        <div class="modal-body">
          <div class="content">
            <div class="form-group">
              <label class="form-label" for="edit-avatar-avatar">New avatar</label>
              <input class="form-input" type="url" id="edit-avatar-avatar" placeholder="URL">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" style="background: #32b643; border-color: #32b643;" onclick="modal_edit_avatar_edit();">Edit</button>
          <a class="btn btn-link" style="color: #e85600;" href="#close">Cancel</a>
        </div>
      </div>
    </div>
    
    <div class="modal modal-lg" id="modal-delete-user">
      <a href="#close" class="modal-overlay" aria-label="Close"></a>
      <div class="modal-container">
        <div class="modal-header">
          <a href="#close" class="btn btn-clear float-right" aria-label="Close"></a>
          <div class="modal-title h5">Are you sure you want to delete your user?</div>
        </div>
        <div class="modal-body">
          <div class="content">
            <p>When deleting your user, you will lose all your progress. There will be <u>no way</u> to revert your progress!</p>
          </div>
        </div>
        <div class="modal-footer">
          <a class="btn btn-error" href="#modal-delete-user-repeat">Delete</a>
          <a class="btn btn-link" style="color: #00aaff;" href="#close">Cancel</a>
        </div>
      </div>
    </div>
    
    <div class="modal modal-lg" id="modal-delete-user-repeat">
      <a href="#close" class="modal-overlay" aria-label="Close"></a>
      <div class="modal-container">
        <div class="modal-header">
          <a href="#close" class="btn btn-clear float-right" aria-label="Close"></a>
          <div class="modal-title h5">Are you sure you want to delete your user?</div>
        </div>
        <div class="modal-body">
          <div class="content">
            <p>Please type "DELETE" in the textbox below. There will be <u>no way</u> to revert your progress!</p>
            <div class="form-group">
              <label class="form-label" for="delete-user-repeat-delete">Delete user</label>
              <input class="form-input" type="text" id="delete-user-repeat-delete" placeholder="DELETE">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-error" onclick="modal_delete_user();">Delete</button>
          <a class="btn btn-link" style="color: #00aaff;" href="#close">Cancel</a>
        </div>
      </div>
    </div>
    
    <div class="modal modal-md" id="modal-delete-user-failed">
      <a href="#close" class="modal-overlay" aria-label="Close"></a>
      <div class="modal-container">
        <div class="modal-header">
          <a href="#close" class="btn btn-clear float-right" aria-label="Close"></a>
          <div class="modal-title h5">Failed deleting user</div>
        </div>
        <div class="modal-body">
          <div class="content">
            <p>You didn't type "DELETE" but you typed something else, if you still wish to delete your user try again by pressing the "Delete user" button again.</p>
          </div>
        </div>
        <div class="modal-footer">
          <a class="btn btn-link" style="color: #00aaff" href="#close">OK</a>
        </div>
      </div>
    </div>
    
    <div style="margin: auto; width: 600px; padding: 10px;">
      <div class="container">
        <div class="columns">
          <div class="column col-13">
            <br>
            <div class="panel" style="background-color: #fff;">
              <div class="panel-header text-center">
                <figure class="avatar avatar-lg"><img id="user-panel-avatar" src="https://lootl.ml/img/lootl.png" style="background-color: #ededed;"></figure>
                <div id="user-panel-username" class="panel-title h5 mt-10">User</div>
                <span class="divider"></span>
              </div>
              <div class="panel-body">
                <div class="tile tile-centered">
                  <div class="tile-content">
                    <div class="tile-title text-bold">Username</div>
                    <div class="tile-subtitle" id="user-panel-profile-username">User</div>
                  </div>
                  <div class="tile-action">
                    <a href="#modal-edit-username" class="btn btn-link btn-action btn-lg tooltip tooltip-left" data-tooltip="Edit username"><i class="icon icon-edit" style="color: #00aaff;"></i></a>
                  </div>
                </div>
                <br>
                <div class="tile tile-centered">
                  <div class="tile-content">
                    <div class="tile-title text-bold">Avatar</div>
                    <div class="tile-subtitle" id="user-panel-profile-avatar">https://lootl.ml/img/lootl.png</div>
                  </div>
                  <div class="tile-action">
                    <a href="#modal-edit-avatar" class="btn btn-link btn-action btn-lg tooltip tooltip-left" data-tooltip="Edit avatar"><i class="icon icon-edit" style="color: #00aaff;"></i></a>
                  </div>
                </div>
                <br>
                <div class="tile tile-centered">
                  <div class="tile-content">
                    <a class="btn btn-error" href="#modal-delete-user">Delete user</a>
                  </div>
                </div>
              </div>
              <div class="panel-footer">
                <button id="save-settings" class="btn btn-primary btn-block" style="background: #00aaff; border-color: #00aaff;" onclick="save_settings();">Save</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <script type="text/javascript" src="https://lootl.ml/js/jquery-3.5.1.js"></script>
  <script type="text/javascript" src="https://lootl.ml/js/materialize.min.js"></script>
</body>
<script>
  function save_settings(){
    localStorage.setItem("username", document.getElementById("user-panel-profile-username").innerHTML);
    localStorage.setItem("avatar", document.getElementById("user-panel-profile-avatar").innerHTML);
    document.getElementById("save-settings").classList.add("loading");
    setTimeout(function() {
      document.getElementById("save-settings").classList.remove("loading");
      M.toast({html: 'Saved your settings'});
    }, 1000);
  }
  
  function modal_delete_user(){
    if (document.getElementById("delete-user-repeat-delete").value == "DELETE"){
      localStorage.getItem("username");
      localStorage.getItem("avatar");
      localStorage.removeItem("username");
      localStorage.removeItem("avatar");
      location.href = "https://lootl.ml/";
    } else {
      location.href = "https://lootl.ml/me/settings#modal-delete-user-failed";
    }
  }
  
  function modal_edit_username_edit(){
    location.href = "https://lootl.ml/me/settings#close";
    document.getElementById("user-panel-username").innerHTML = document.getElementById("edit-username-username").value;
    document.getElementById("user-panel-profile-username").innerHTML = document.getElementById("edit-username-username").value;
  }
  
  function modal_edit_avatar_edit(){
    location.href = "https://lootl.ml/me/settings#close";
    document.getElementById("user-panel-avatar").src = document.getElementById("edit-avatar-avatar").value;
    document.getElementById("user-panel-profile-avatar").innerHTML = document.getElementById("edit-avatar-avatar").value;
  }
  
  document.addEventListener("DOMContentLoaded", function(){
    if (localStorage.getItem("username") && localStorage.getItem("avatar")){
      document.getElementById("navbar-username").innerHTML = localStorage.getItem("username");
      document.getElementById("navbar-avatar").src = localStorage.getItem("avatar");
      document.getElementById("navbar-menu-username").innerHTML = localStorage.getItem("username");
      document.getElementById("navbar-menu-avatar").src = localStorage.getItem("avatar");
      document.getElementById("user-panel-username").innerHTML = localStorage.getItem("username");
      document.getElementById("user-panel-avatar").src = localStorage.getItem("avatar");
      document.getElementById("user-panel-profile-username").innerHTML = localStorage.getItem("username");
      document.getElementById("user-panel-profile-avatar").innerHTML = localStorage.getItem("avatar");
      document.getElementById("edit-avatar-avatar").value = localStorage.getItem("avatar");
      document.getElementById("favicon").href = localStorage.getItem("avatar");
    } else {
      location.href = "https://lootl.ml";
    }
  });
</script>
<style>
  body {
    background-color: #ffffff;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 800 800'%3E%3Cg fill='none' stroke='%23dbdbdb' stroke-width='1'%3E%3Cpath d='M769 229L1037 260.9M927 880L731 737 520 660 309 538 40 599 295 764 126.5 879.5 40 599-197 493 102 382-31 229 126.5 79.5-69-63'/%3E%3Cpath d='M-31 229L237 261 390 382 603 493 308.5 537.5 101.5 381.5M370 905L295 764'/%3E%3Cpath d='M520 660L578 842 731 737 840 599 603 493 520 660 295 764 309 538 390 382 539 269 769 229 577.5 41.5 370 105 295 -36 126.5 79.5 237 261 102 382 40 599 -69 737 127 880'/%3E%3Cpath d='M520-140L578.5 42.5 731-63M603 493L539 269 237 261 370 105M902 382L539 269M390 382L102 382'/%3E%3Cpath d='M-222 42L126.5 79.5 370 105 539 269 577.5 41.5 927 80 769 229 902 382 603 493 731 737M295-36L577.5 41.5M578 842L295 764M40-201L127 80M102 382L-261 269'/%3E%3C/g%3E%3Cg fill='%23bababa'%3E%3Ccircle cx='769' cy='229' r='5'/%3E%3Ccircle cx='539' cy='269' r='5'/%3E%3Ccircle cx='603' cy='493' r='5'/%3E%3Ccircle cx='731' cy='737' r='5'/%3E%3Ccircle cx='520' cy='660' r='5'/%3E%3Ccircle cx='309' cy='538' r='5'/%3E%3Ccircle cx='295' cy='764' r='5'/%3E%3Ccircle cx='40' cy='599' r='5'/%3E%3Ccircle cx='102' cy='382' r='5'/%3E%3Ccircle cx='127' cy='80' r='5'/%3E%3Ccircle cx='370' cy='105' r='5'/%3E%3Ccircle cx='578' cy='42' r='5'/%3E%3Ccircle cx='237' cy='261' r='5'/%3E%3Ccircle cx='390' cy='382' r='5'/%3E%3C/g%3E%3C/svg%3E");
  }
</style>
